{% load static %}



<!DOCTYPE html><!-- This site was created in Webflow. http://www.webflow.com --><!-- Last Published: Mon Jun 14 2021 20:30:44 GMT+0000 (Coordinated Universal Time) -->
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" data-wf-domain="dawn-dashboard.webflow.io" data-wf-page="6024853e63955a2f6b55a25b" data-wf-site="6022ffeab6f354c9aa1eb2a2">

<head>
	<meta charset="utf-8" />
	<title>Nftion Dashboard - The Best NFT Analytics Tool</title>
	<meta content="Nftion Dashboard - The Best NFT Analytics Tool." property="og:title" />
	<meta content="Nftion Dashboard - The Best NFT Analytics Tool." property="twitter:title" />
	<meta content="width=device-width, initial-scale=1" name="viewport" />
	<link href="{% static 'css/dawn-dashboard.webflow.fad9e2a6a.css' %}" rel="stylesheet" type="text/css" />
	  <link rel="icon" type="image/x-icon" href="{% static 'img/imgs/logo34.svg' %}">

	<style>
		.w-webflow-badge {
		   display: None !important;
		   visibility: hidden !important;
		}
		
	</style>
	
</head>

<body>
	<div class="wrapper">
		<div data-collapse="all" data-animation="default" data-duration="400" role="banner" class="simple-nav w-nav">
			<a href="/" class="dashboard-logo w-nav-brand">
			<img src="{% static 'img/imgs/logo.png' %}" width="98" alt="" class="sidebar-logo" /></a>
			<div class="nav-spacer"></div>
			<a href="{% url 'home:dashboard' %}" class="nav-link cta margin-right w-nav-link">Back to Dashboard</a>
			{% include 'partials/redirecting_part.html' %}
			<div data-hover="" data-delay="0" class="profile-menu-dropdown w-dropdown">
				<div data-w-id="b24ef7f8-86e5-1c85-e1c5-b65466441b29" class="profile-menu w-dropdown-toggle">
					<div class="profile-image">
						<img src="{% if user_profile.avatar %}{{ user_profile.avatar.url }}{% else %}{% static 'img/imgs/avatar.png' %}{% endif %}" loading="lazy" alt="" class="cover-image" />
					</div>
					<img src="{% static 'img/6023423b0a5988466e83ffb8_CaretDown (1).svg' %}" loading="lazy" width="15" alt="" class="menu-down" />
				</div>
				<nav class="profile-menu-list w-dropdown-list">
					<a href="{% url 'home:profile' %}" class="profile-menu-link w-nav-link">My Profile</a>
					<a href="{% url 'home:settings' %}" class="profile-menu-link w-nav-link">Settings</a>
					<div class="menu-divider"></div>
					<a href="{% url 'home:support' %}" class="profile-menu-link w-nav-link">Report an Issue</a>
					<a href="{% url 'home:terms_conditions' %}" class="profile-menu-link w-nav-link">Terms &amp; Conditions</a>
					<a href="{% url 'home:privacy-policy' %}" class="profile-menu-link w-nav-link">Privacy Policy</a>
					<div class="menu-divider"></div>
					<a href="{% url 'auth:logout' %}" class="profile-menu-link w-nav-link">Log Out</a>
				</nav>
			</div>
		</div>
		<div class="main-content">
			<div class="container w-container">
				<h1 class="page-title">Your Profile</h1>
			</div>
			<div class="_1-2-5-grid">
				<div class="module center-align sticky">
					<div class="profile-image large"><img src="{% if user_profile.avatar %}{{ user_profile.avatar.url }}{% else %}{% static 'img/imgs/avatar.png' %}{% endif %}" loading="lazy" alt="" class="cover-image" /></div>
					<h3 class="no-margin">{{ user_profile.name }}</h3>
					<p>{{ user_profile.user.username }}</p>
                    <div class="profile-buttons-div"></div>
				</div>
				<div class="module-group">
					<div id="Account-Infomraiton" class="module">
						<div class="module-header minimal">
							<h3 class="module-heading">Account Information</h3>
						</div>
						<div class="module-main">
							<div class="settings-label"></div>
							<div class="divider"></div>
							<div class="w-form">
								<form id="email-form" name="email-form" data-name="Email Form" enctype="multipart/form-data" method="post" class="form" action="{% url 'home:profile' %}">
                            <label>Upload New Picture</label>
                                    {{ form.avatar.errors }}
                                    {{ form.avatar }}
                                    <p class="paragraph-small no-margin">You can upload images up to 400x400px.<br /></p>
                                    <p id="require_fields"></p>
                                    <label for="name">Name</label> {{ form.name }}
                                    <label for="profile-email">Email</label>
                                    {{ form.email.errors }}
                                    {{ form.email }}
                                    <p id="username_taken"></p>
                                    <label for="username">Username</label>
                                    {{ form.username.errors }}
                                    {{ form.username }}
                                    <label for="bio">Bio</label>
                                    {{ form.bio.errors }}
                                    {{ form.bio }}
                                    {% csrf_token %}
{#							<input type="file" name="profile_picture" class="button settings w-button">#}

{#									<div class="field-block">#}
{#										<label for="name">Name</label>#}
{#										<input type="text" class="text-input filled w-input" maxlength="256" name="name" data-name="Name" value="{% if user_profile.name %}{{ user_profile.name }}{% else %}{{ user_profile.user.first_name }}{% endif %}" required="" />#}
{#									</div>#}
{#									<div class="field-block">#}
{#										<label for="profile-email">Email</label>#}
{#										<input type="email" class="text-input filled w-input" disabled maxlength="256" name="profile-email" data-name="profile-email" value="{{ user_profile.user.email }}" required="" />#}
{#									</div>#}
{#									<div class="field-block">#}
{#										<label for="Username">Username</label>#}
{#										<input type="text" class="text-input filled w-input" maxlength="256" name="username" data-name="Username" value="{{ user_profile.user.username }}" required="" />#}
{#									</div>#}
{#									<div class="field-block">#}
{#										<label for="Username">Bio</label>#}
{#										<textarea placeholder="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat." maxlength="5000" data-name="Field" name="bio" class="text-area filled w-input">{{ user_profile.bio }}</textarea>#}
{#									</div>#}
                                    <input type="submit" id="form-submit-btn" value="Update Profile" data-wait="Please wait..." class="button settings w-button" />
                                {% csrf_token %}
								</form>
								<div class="form-success w-form-done">
									<div>We&#x27;ve updated your account. Please refresh the page.</div>
								</div>
								<div class="form-error w-form-fail">
									<div>Oops! Something went wrong. Please fill in the required fields and try again.</div>
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
		<div class="dashboard-footer">
			<p class="paragraph-small light">© Nftion All Rights Reserved・ Designed by <a href="https://onesite.agency" target="_blank" class="simple-link light">OneSite Agency</a></p>
		</div>
	</div>
	<script src="{% static 'js/jquery-3.5.1.min.js' %}" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
	<script src="{% static 'js/webflow.profile.js' %}" type="text/javascript"></script><!--[if lte IE 9]>
<script src="{% static 'js/placeholder.js' %}"></script><![endif]-->
</body>
<script>
    function validate_str(str){
        return str.trim().length !== 0;
    }

    $('#form-submit-btn').click(function (event){
        event.preventDefault()
        if (validate_str($('#id_name').val()) === false){
            $('#require_fields').text('All fields are required')
            return
         }
         else{
             $('#require_fields').text('')
        }
        var data = new FormData()
        data.append("avatar", $("#id_avatar")[0].files[0]);
         data.append("name", $("#id_name").val());
          data.append("username", $("#id_username").val());
           data.append("email", $("#id_email").val());
            data.append("bio", $("#id_bio").val());

        $.ajax({
            url: "{% url 'home:profile' %}",
            type: 'POST',
            mimeType: "multipart/form-data",
            data:data,
            processData: false,
            contentType: false,
            success: function (response){
                 console.log(response)
                if (response.length === 24) {
                    $('#username_taken').text('This username is taken')
                 }
                else{
                    $('#username_taken').text('')
                }
                location.reload()

            },
            error: function (error){
                console.log(error)
            }

        })
     })
</script>
</html>